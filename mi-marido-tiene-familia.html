<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Mi marido tiene familia</title>
</head>
<body>
<h1>Mi marido tiene familia</h1>
Género: Comedia
<br>
Año: 2017
<br>
Reparto: Zuria Vega, Daniel Arenas, Diana Bracho, Laura Vignati, Silvia Pinal
<br>
País de origen: México
<br>
Temporadas: 1
<br>
Episodios: 100
<hr>
<h1>Sinopsis</h1>
Julieta (Zuria Vega) es una mujer trabajadora e independiente que anhela encontrar el amor de su vida pero sin tener que lidiar con la familia política por no querer repetir la historia de su madre, Catalina. Años atrás, los problemas con Catalina y el padre de Julieta llegaron a tal grado que su padre tomó la decisión de irse de la casa. Cuando Julieta conoce a Robert (Daniel Arenas) un médico cirujano, se enamoran perdidamente, pero los planes de Julieta se vienen abajo cuando Robert encuentra a su verdadera familia. Julieta se topa con lo que más aborrece, tener que convivir con suegros, cuñadas, abuela, tíos y primos políticos. Robert está de lo más feliz al haber encontrado a su familia después de que hace 34 años fue abandonado descuidadamente y Robert nunca recordó que su verdadero nombre es Juan Pablo. Ahora Julieta y Robert o Juan Pablo tendrán que acostumbrarse a su nuevo estilo de vida y cargar con todos los conflictos familiares. Pero Julieta no está dispuesta a soportar nada de esto y la amorosa 
estabilidad entre Robert y ella, podría desmoronarse.
<hr>
<div>
  <label for="chapter-list" accesskey="c">Selecciona el capítulo a reproducir:</label>
  <select id="chapter-list" aria-label="Lista de capítulos" accesskey="c"></select>

  <button id="play-pause" title="Reproducir (Alt+K)" aria-label="Reproducir">Reproducir</button>

  <p id="speak-text" onclick="speak(this.textContent);" accesskey="i"></p>
  <div id="alert" aria-live="assertive"></div>

  <button id="backward" title="Retroceder 10 segundos (Alt+J)" aria-label="Retroceder">Retroceder</button>
  <button id="forward" title="Avanzar 10 segundos (Alt+L)" aria-label="Avanzar">Avanzar</button>

  <button id="volume-up" title="Subir volumen (Alt+U)" aria-label="Subir volumen">Subir volumen</button>
  <button id="volume-down" title="Bajar volumen (Alt+O)" aria-label="Bajar volumen">Bajar volumen</button>

  <input type="checkbox" id="autoplay" aria-label="Reproducir automáticamente el siguiente capítulo" accesskey="s" checked>
</div>

<audio id="repro" src="" type="audio/mpeg"></audio>

<script>
  const audio = document.getElementById("repro");
  const chapterList = document.getElementById("chapter-list");
  const playPauseButton = document.getElementById("play-pause");
  const backwardButton = document.getElementById("backward");
  const forwardButton = document.getElementById("forward");
  const volumeUpButton = document.getElementById("volume-up");
  const volumeDownButton = document.getElementById("volume-down");
  const rootLink = "https://raw.githubusercontent.com/ivanack123/mi-marido-tiene-familia/main/";

  const chapterValues = Array.from({ length: 101}, (_, i) => i + 1);
  let currentChapter = 1;

  function setChapter() {
    currentChapter = chapterList.value;
    audio.src = `${rootLink}${currentChapter}.m4a`;
    audio.load();
    audio.play();
  }

  function updatePlayPauseButton(title, ariaLabel) {
    playPauseButton.setAttribute("title", `${title} (Alt+K)`);
    playPauseButton.setAttribute("aria-label", ariaLabel);
    playPauseButton.textContent = title;
  }

  function playPause() {
    if (audio.paused) {
      audio.play();
      updatePlayPauseButton("Pausar", "Pausar");
    } else {
      audio.pause();
      updatePlayPauseButton("Reproducir", "Reproducir");
    }
  }

  function skip(direction) {
    audio.currentTime += (direction === "forward" ? 10 : -10);
    audio.currentTime = Math.min(Math.max(audio.currentTime, 0), audio.duration);
  }

  function handleMediaKeys(event) {
    const mediaKeysMap = {
      "MediaPlayPause": playPause,
      "MediaTrackPrevious": () => skip("backward"),
      "MediaTrackNext": () => skip("forward"),
      "VolumeUp": () => audio.volume += 0.1,
      "VolumeDown": () => audio.volume -= 0.1,
      "VolumeMute": () => audio.muted = !audio.muted
    };
    const mediaKeyFunction = mediaKeysMap[event.code];
    if (mediaKeyFunction) {
      event.preventDefault();
      mediaKeyFunction();
    }
  }

  function checkAutoplay() {
    if (autoplay.checked) {
      currentChapter = parseInt(chapterList.value) + 1;
      currentChapter = currentChapter > chapterList.options.length ? 1 : currentChapter;
      chapterList.value = currentChapter;
      setChapter();
    }
  }

  function setSpeakText() {
    const speakText = document.getElementById("speak-text");
    const currentTime = formatTime(audio.currentTime);
    const duration = formatTime(audio.duration);
    speakText.textContent = `${currentTime} de ${duration}`;
  }

  function formatTime(time) {
    const minutes = Math.floor(time / 60);
    const seconds = Math.floor(time % 60);
    return `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
  }

  for (let chapter of chapterValues) {
    const option = document.createElement("option");
    option.text = `Capítulo ${chapter}`;
    option.value = chapter;
    chapterList.add(option);
  }

  chapterList.addEventListener("change", setChapter);
  setChapter();

  playPauseButton.addEventListener("click", playPause);
  backwardButton.addEventListener("click", () => skip("backward"));
  forwardButton.addEventListener("click", () => skip("forward"));
  volumeUpButton.addEventListener("click", () => audio.volume += 0.1);
  volumeDownButton.addEventListener("click", () => audio.volume -= 0.1);
  audio.addEventListener("ended", checkAutoplay);
  audio.addEventListener("timeupdate", setSpeakText);

  document.addEventListener("keydown", function(event) {
    const keyMap = {
      KeyK: playPause,
      KeyJ: () => skip("backward"),
      KeyL: () => skip("forward"),
      KeyO: () => audio.volume -= 0.1,
      KeyM: () => audio.muted = !audio.muted,
      KeyU: () => audio.volume += 0.1
    };
    const keyFunction = keyMap[event.code];
    if (keyFunction) {
      event.preventDefault();
      keyFunction();
    }
  });
</script>
</body>
</html>