<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>La CQ</title>
</head>
<body>
<h1>La CQ</h1>
Género: Comedia
<br>
Año: 2012
<br>
Reparto: Emiliano Flores,Ale Müller,Benny Emmanuel,Harold Azuara,Fernanda Urdapilleta,Antonio Delli,Elisa Parejo,Betty Hass,Carlos Arraiz,Guillermo Canache,Augusto Galíndez,Luis Ceballos,Ferny Graciano
<br>
País de origen: México
<br>
Temporadas: 1
<br>
Episodios: 100
<hr>
<h1>Sinopsis</h1>
LA CQ narra la historia de un grupo de ocho estudiantes adolescentes de una secundaria muy particular. Cada uno tiene una personalidad muy diferente y juntos viven las más alocadas aventuras: encontrarse con el primer amor, saber quién ganará el proyecto de ciencias, descubrir el verdadero significado de la amistad o ver quién es el más ingenioso para hacer trampa en el examen, son algunas de las anécdotas y conflictos divertidos que vivirán.
Ángel es el capitán del equipo de fútbol de la CQ, es simpático y según él guapo. Su hermana, Adri, es la chica más inteligente de la escuela, pero esto no le impide ser fanática de la lucha libre, los videojuegos o del skateboarding. Siempre está con su mejor amiga, Clara, que acaba de llegar a la CQ. Clara es bonita y está secretamente enamorada de Ángel. El nerd de la CQ es Beto y lo chistoso es que su mejor amigo, Monche, es tan culto como un bebé de 4 meses. Jenny, la capitana de porristas de la CQ e hija del director de la escuela, es prima y amiga de Danny, la cual considera a Jenny como su ejemplo a seguir y vive prácticamente para cumplir los caprichos y deseos de su berrinchuda prima. Sin embargo, este grupo de adolescentes no sería perfecto sin Roque, el chico problema de la escuela quién ha cursado segundo de secundaria en tres ocasiones y seguramente lo cursará tres veces más.
<hr>
<div>
  <label for="chapter-list" accesskey="c">Selecciona el capítulo a reproducir:</label>
  <select id="chapter-list" aria-label="Lista de capítulos" accesskey="c"></select>

  <button id="play-pause" title="Reproducir (Alt+K)" aria-label="Reproducir">Reproducir</button>

  <p id="speak-text" onclick="speak(this.textContent);" accesskey="i"></p>
  <div id="alert" aria-live="assertive"></div>

  <button id="backward" title="Retroceder 10 segundos (Alt+J)" aria-label="Retroceder">Retroceder</button>
  <button id="forward" title="Avanzar 10 segundos (Alt+L)" aria-label="Avanzar">Avanzar</button>

  <button id="volume-up" title="Subir volumen (Alt+U)" aria-label="Subir volumen">Subir volumen</button>
  <button id="volume-down" title="Bajar volumen (Alt+O)" aria-label="Bajar volumen">Bajar volumen</button>

  <input type="checkbox" id="autoplay" aria-label="Reproducir automáticamente el siguiente capítulo" accesskey="s" checked>
</div>

<audio id="repro" src="" type="audio/mpeg"></audio>

<script>
  const audio = document.getElementById("repro");
  const chapterList = document.getElementById("chapter-list");
  const playPauseButton = document.getElementById("play-pause");
  const backwardButton = document.getElementById("backward");
  const forwardButton = document.getElementById("forward");
  const volumeUpButton = document.getElementById("volume-up");
  const volumeDownButton = document.getElementById("volume-down");
  const rootLink = "https://raw.githubusercontent.com/ivanack123/la-cq/main/";

  const chapterValues = Array.from({ length: 100}, (_, i) => i + 1);
  let currentChapter = 1;

  function setChapter() {
    currentChapter = chapterList.value;
    audio.src = `${rootLink}${currentChapter}.m4a`;
    audio.load();
    audio.play();
  }

  function updatePlayPauseButton(title, ariaLabel) {
    playPauseButton.setAttribute("title", `${title} (Alt+K)`);
    playPauseButton.setAttribute("aria-label", ariaLabel);
    playPauseButton.textContent = title;
  }

  function playPause() {
    if (audio.paused) {
      audio.play();
      updatePlayPauseButton("Pausar", "Pausar");
    } else {
      audio.pause();
      updatePlayPauseButton("Reproducir", "Reproducir");
    }
  }

  function skip(direction) {
    audio.currentTime += (direction === "forward" ? 10 : -10);
    audio.currentTime = Math.min(Math.max(audio.currentTime, 0), audio.duration);
  }

  function handleMediaKeys(event) {
    const mediaKeysMap = {
      "MediaPlayPause": playPause,
      "MediaTrackPrevious": () => skip("backward"),
      "MediaTrackNext": () => skip("forward"),
      "VolumeUp": () => audio.volume += 0.1,
      "VolumeDown": () => audio.volume -= 0.1,
      "VolumeMute": () => audio.muted = !audio.muted
    };
    const mediaKeyFunction = mediaKeysMap[event.code];
    if (mediaKeyFunction) {
      event.preventDefault();
      mediaKeyFunction();
    }
  }

  function checkAutoplay() {
    if (autoplay.checked) {
      currentChapter = parseInt(chapterList.value) + 1;
      currentChapter = currentChapter > chapterList.options.length ? 1 : currentChapter;
      chapterList.value = currentChapter;
      setChapter();
    }
  }

  function setSpeakText() {
    const speakText = document.getElementById("speak-text");
    const currentTime = formatTime(audio.currentTime);
    const duration = formatTime(audio.duration);
    speakText.textContent = `${currentTime} de ${duration}`;
  }

  function formatTime(time) {
    const minutes = Math.floor(time / 60);
    const seconds = Math.floor(time % 60);
    return `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
  }

  for (let chapter of chapterValues) {
    const option = document.createElement("option");
    option.text = `Capítulo ${chapter}`;
    option.value = chapter;
    chapterList.add(option);
  }

  chapterList.addEventListener("change", setChapter);
  setChapter();

  playPauseButton.addEventListener("click", playPause);
  backwardButton.addEventListener("click", () => skip("backward"));
  forwardButton.addEventListener("click", () => skip("forward"));
  volumeUpButton.addEventListener("click", () => audio.volume += 0.1);
  volumeDownButton.addEventListener("click", () => audio.volume -= 0.1);
  audio.addEventListener("ended", checkAutoplay);
  audio.addEventListener("timeupdate", setSpeakText);

  document.addEventListener("keydown", function(event) {
    const keyMap = {
      KeyK: playPause,
      KeyJ: () => skip("backward"),
      KeyL: () => skip("forward"),
      KeyO: () => audio.volume -= 0.1,
      KeyM: () => audio.muted = !audio.muted,
      KeyU: () => audio.volume += 0.1
    };
    const keyFunction = keyMap[event.code];
    if (keyFunction) {
      event.preventDefault();
      keyFunction();
    }
  });
</script>
</body>
</html>